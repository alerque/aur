From 39839e7aa3f299008b53f345f27bc7f4a6793596 Mon Sep 17 00:00:00 2001
From: Eli Schwartz <eschwartz93@gmail.com>
Date: Thu, 21 Jun 2018 05:00:37 -0400
Subject: [PATCH] Don't use electron to build

---
 shared/desktop/package.desktop.js   | 4 ++--
 shared/desktop/yarn-helper/index.js | 2 --
 shared/package.json                 | 1 -
 3 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/shared/desktop/package.desktop.js b/shared/desktop/package.desktop.js
index 827b087fc..109f9048c 100644
--- a/shared/desktop/package.desktop.js
+++ b/shared/desktop/package.desktop.js
@@ -87,7 +87,7 @@ function main() {
   // use the same version as the currently-installed electron
   console.log('Finding electron version')
   try {
-    packagerOpts.electronVersion = require('../package.json').devDependencies.electron
+    packagerOpts.electronVersion = 'unused string'
     console.log('Found electron version:', packagerOpts.electronVersion)
   } catch (err) {
     console.log("Couldn't parse yarn list to find electron:", err)
@@ -140,7 +140,7 @@ function startPack() {
           pack(os.platform(), shouldBuildAnArch)
             .then(postPack(os.platform(), shouldBuildAnArch))
             .catch(postPackError)
-        } else {
+        } else if (false) {
           // build for current platform only
           pack(os.platform(), os.arch())
             .then(postPack(os.platform(), os.arch()))
diff --git a/shared/desktop/yarn-helper/index.js b/shared/desktop/yarn-helper/index.js
index 3a5851cb0..d71b7f31e 100644
--- a/shared/desktop/yarn-helper/index.js
+++ b/shared/desktop/yarn-helper/index.js
@@ -1,7 +1,6 @@
 // @flow
 // Helper for cross platform yarn run script commands
 import buildCommands from './build'
-import electronComands from './electron'
 import fontCommands from './font'
 import fs from 'fs'
 import path from 'path'
@@ -12,7 +11,6 @@ const [, , command, ...rest] = process.argv
 const commands = {
   ...buildCommands,
   ...fontCommands,
-  ...electronComands,
   help: {
     code: () => {
       console.log(
diff --git a/shared/package.json b/shared/package.json
index 2fd23f5c0..bb3846dc8 100644
--- a/shared/package.json
+++ b/shared/package.json
@@ -200,7 +200,6 @@
     "css-loader": "0.28.11",
     "del": "3.0.0",
     "devtron": "1.4.0",
-    "electron": "2.0.5",
     "electron-download": "git://github.com/keybase/electron-download#keybase-fixes-off-410",
     "electron-packager": "12.1.0",
     "eslint": "5.2.0",
-- 
2.18.0

