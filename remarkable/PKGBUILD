# Maintainer: Caleb Maclennan <caleb@alerque.com>
# Contributor: Mikael Blomstrand <gmail: kmbloms>
# Contributor: MaryJaneInChain <gmail.com@maryjaneinchain>
# Contributor: Michael Goehler <somebody dot here at gmx dot de>

pkgname=remarkable
pkgver=1.95
pkgrel=8
pkgdesc='A free fully featured markdown editor for Linux'
arch=(any)
url='http://remarkableapp.github.io'
license=(MIT)
_pydeps=(beautifulsoup4
         cairo
         gobject
         markdown)
depends=(python
         "${_pydeps[@]/#/python-}"
         webkit2gtk
         wkhtmltopdf
         gtksourceview3)
makedepends=(python-{build,installer,wheel}
             python-setuptools)
optdepends=('python-lxml: export to HTML format support'
            'python-gtkspellcheck: Spellcheck (might cause problems)')
# install=remarkable.install
_archive="${pkgname^}-$pkgver"
source=("https://github.com/jamiemcg/Remarkable/archive/v$pkgver/$_archive.tar.gz")
sha256sums=('55f40ff0bc5b9269807e248e0fa849ee4aaf92d32f9b1350ed17bc85ccd3b030')

prepare() {
	cd "$_archive"
}

build() {
	cd "$_archive"
	# python -m build -wn
}

package() {
	cd "$_archive"
	install -Dm0644 -t "$pkgdir/usr/share/licenses/$pkgname/" LICENSE
	_python_site=$(python -c 'import site; print(site.getsitepackages()[0]);')
	install -Dm0755 -t "$pkgdir/usr/bin/" "bin/$pkgname"
	#    install -D "debian/remarkable.mime" "${pkgdir}/usr/lib/mime/packages/remarkable"
	#    install -D "data/media/remarkable.svg" "${pkgdir}/usr/share/icons/hicolor/scalable/apps/remarkable.svg"
	#    install -D remarkable.desktop "${pkgdir}/usr/share/applications/remarkable.desktop"
	#
	#    mv data/glib-2.0 "${pkgdir}/usr/share/"
	#
	#    install -d "${pkgdir}/${_python_site}"
	#    mv markdown pdfkit remarkable remarkable_lib "${pkgdir}/${_python_site}/"
	#
	#    mv data "${pkgdir}/usr/share/remarkable/"
}
